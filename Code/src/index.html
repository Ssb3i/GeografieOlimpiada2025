<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn earthquake preparedness through an interactive educational game covering before, during, and after earthquake scenarios.">
    <title>Earthquake Preparedness Game - Learn Life-Saving Skills</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class="game-header">
        <h1 class="game-title">üåç Earthquake Preparedness Game</h1>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
    </header>
    
    <main class="game-main" id="game-container">
        <nav class="scene-nav" id="scene-nav">
            <button class="scene-nav__btn scene-nav__btn--active" data-scene="before">Before</button>
            <button class="scene-nav__btn" data-scene="during">During</button>
            <button class="scene-nav__btn" data-scene="after">After</button>
        </nav>
        
        <section class="game-content" id="game-content">
            <div class="scene-container" id="scene-container">
                <!-- Scene content will be dynamically loaded here -->
                <div style="padding: 2rem; text-align: center;">
                    <h2>üåç Loading Game...</h2>
                    <p>If this message persists, there may be a JavaScript error. Check the console.</p>
                </div>
            </div>
        </section>
        
        <aside class="game-sidebar" id="game-sidebar">
            <div class="score-display">
                <h3>Score: <span id="current-score">0</span></h3>
            </div>
            
            <div class="achievements-panel" id="achievements-panel">
                <h4>üèÜ Achievements</h4>
                <div class="achievement-progress" id="achievement-progress">
                    <span id="achievements-count">0/10</span>
                    <div class="achievement-progress__bar">
                        <div class="achievement-progress__fill" id="achievement-progress-fill" style="width: 0%"></div>
                    </div>
                    <span id="achievement-points">0 pts</span>
                </div>
                <div class="achievements-list" id="achievements-list">
                    <!-- Achievement badges will be dynamically added -->
                </div>
            </div>
            
            <div class="hints-panel" id="hints-panel">
                <h4>üí° Hint</h4>
                <p id="current-hint">Click on items to learn about earthquake preparedness!</p>
            </div>
        </aside>
        
        <footer class="game-footer">
            <button class="btn btn--primary" id="next-button" disabled>Continue</button>
            <button class="btn btn--secondary" id="restart-button">Restart Scene</button>
        </footer>
    </main>
    
    <!-- Modal for feedback and education -->
    <div class="modal" id="feedback-modal" role="dialog" aria-hidden="true">
        <div class="modal__content">
            <button class="modal__close" id="modal-close">&times;</button>
            <div class="modal__body" id="modal-body">
                <!-- Modal content will be dynamically added -->
            </div>
        </div>
    </div>
    
    <script type="module" src="js/game.js"></script>
    <script>
        window.addEventListener('error', function(e) {
            console.error('Script error:', e.error);
            console.error('Error details:', e.filename, e.lineno, e.colno);
            // Show a simple fallback message
            document.getElementById('scene-container').innerHTML = `
                <div style="padding: 2rem; text-align: center;">
                    <h2>‚ö†Ô∏è Loading Error</h2>
                    <p>There was an issue loading the game. Please check the console for details.</p>
                    <p>Error: ${e.error.message}</p>
                    <button onclick="location.reload()" style="padding: 0.5rem 1rem; margin-top: 1rem;">Reload Page</button>
                </div>
            `;
        });
    </script>
</body>
</html>